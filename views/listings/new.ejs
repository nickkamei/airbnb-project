<% layout("/layouts/boilerplate") %>
<div class="row mt-3">
    <div class="col-8 offset-2">
        <% if (error) { %>
            <div class="alert alert-danger" role="alert">
                <%= error %>
            </div>
        <% } %>
        <h3>Create a New Listing</h3>
        <form action="/listings" method="POST" novalidate class="needs-validation" enctype="multipart/form-data">
            <!-- ... [previous form fields remain the same] ... -->

            <button class="btn btn-dark add-btn mt-3">Add Listing</button>
        </form>
    </div>
</div>

<script>
document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    console.log('=== FORM SUBMISSION START ===');
    const formData = new FormData(this);
    
    console.log('Form data entries:');
    for (let pair of formData.entries()) {
        console.log(pair[0] + ': ' + pair[1]);
    }
    
    // Check specific required fields
    console.log('Checking required fields:');
    console.log('Title:', formData.get('listing[title]'));
    console.log('Description:', formData.get('listing[description]'));
    console.log('Image:', formData.get('image'));
    console.log('Price:', formData.get('listing[price]'));
    console.log('Location:', formData.get('listing[location]'));
    console.log('Country:', formData.get('listing[country]'));
    
    // Submit the form if everything looks good
    this.submit();
});
</script>
